class e{constructor(){this.gameState="menu",this.score=0,this.highScore=0,this.dog={y:150,velocity:0},this.obstacles=[],this.animationId=null,this.CANVAS_WIDTH=800,this.CANVAS_HEIGHT=600,this.DOG_SIZE=30,this.OBSTACLE_WIDTH=60,this.GAP_SIZE=150,this.GRAVITY=.6,this.JUMP_STRENGTH=-12,this.OBSTACLE_SPEED=3,this.gameLoop=()=>{this.updateGame(),this.draw(),this.animationId=requestAnimationFrame(this.gameLoop)},this.canvas=document.createElement("canvas"),this.canvas.width=this.CANVAS_WIDTH,this.canvas.height=this.CANVAS_HEIGHT,this.canvas.style.border="2px solid #333",this.canvas.style.display="block",this.canvas.style.margin="20px auto",this.canvas.style.background="#87CEEB",this.canvas.style.cursor="pointer",this.ctx=this.canvas.getContext("2d");const t=localStorage.getItem("flappydog-highscore");t&&(this.highScore=parseInt(t,10)),this.canvas.addEventListener("click",()=>this.handleInput()),document.addEventListener("keydown",i=>{i.code==="Space"&&(i.preventDefault(),this.handleInput())}),document.body.innerHTML="",document.body.appendChild(this.canvas),this.gameLoop(),console.log("Simple FlappyDog initialized")}handleInput(){this.gameState==="menu"?this.startGame():this.gameState==="playing"?this.jump():this.gameState==="gameOver"&&this.resetGame()}startGame(){this.gameState="playing",this.score=0,this.dog={y:this.CANVAS_HEIGHT/2,velocity:0},this.obstacles=[],console.log("Game started")}jump(){this.dog.velocity=this.JUMP_STRENGTH}resetGame(){this.gameState="menu",this.dog={y:this.CANVAS_HEIGHT/2,velocity:0},this.obstacles=[],this.score=0}updateGame(){this.gameState==="playing"&&(this.dog.velocity+=this.GRAVITY,this.dog.y+=this.dog.velocity,this.obstacles.forEach(t=>{t.x-=this.OBSTACLE_SPEED,!t.passed&&t.x+this.OBSTACLE_WIDTH<100&&(t.passed=!0,this.score++,console.log("Score:",this.score))}),this.obstacles=this.obstacles.filter(t=>t.x>-this.OBSTACLE_WIDTH),(this.obstacles.length===0||this.obstacles[this.obstacles.length-1].x<this.CANVAS_WIDTH-300)&&this.obstacles.push({x:this.CANVAS_WIDTH,gapY:100+Math.random()*(this.CANVAS_HEIGHT-300),passed:!1}),this.checkCollisions()&&this.gameOver())}checkCollisions(){if(this.dog.y<=0||this.dog.y+this.DOG_SIZE>=this.CANVAS_HEIGHT)return!0;for(const t of this.obstacles)if(100+this.DOG_SIZE>t.x&&100<t.x+this.OBSTACLE_WIDTH&&(this.dog.y<t.gapY||this.dog.y+this.DOG_SIZE>t.gapY+this.GAP_SIZE))return!0;return!1}gameOver(){this.gameState="gameOver",this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("flappydog-highscore",this.highScore.toString()),console.log("New high score:",this.highScore))}draw(){this.ctx.clearRect(0,0,this.CANVAS_WIDTH,this.CANVAS_HEIGHT);const t=this.ctx.createLinearGradient(0,0,0,this.CANVAS_HEIGHT);t.addColorStop(0,"#87CEEB"),t.addColorStop(1,"#98D8E8"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.CANVAS_WIDTH,this.CANVAS_HEIGHT),this.gameState==="menu"?this.drawMenu():this.gameState==="playing"?this.drawGame():this.gameState==="gameOver"&&this.drawGameOver()}drawMenu(){this.ctx.fillStyle="#000",this.ctx.font="bold 48px Arial",this.ctx.textAlign="center",this.ctx.fillText("🐕 FlappyDog",this.CANVAS_WIDTH/2,200),this.ctx.font="24px Arial",this.ctx.fillText("Click or Press Space to Start",this.CANVAS_WIDTH/2,300),this.ctx.font="20px Arial",this.ctx.fillText(`High Score: ${this.highScore}`,this.CANVAS_WIDTH/2,350),this.drawDog(150,400)}drawGame(){this.obstacles.forEach(t=>this.drawObstacle(t)),this.drawDog(100,this.dog.y),this.ctx.fillStyle="#000",this.ctx.font="bold 32px Arial",this.ctx.textAlign="left",this.ctx.fillText(`Score: ${this.score}`,20,50)}drawGameOver(){this.obstacles.forEach(t=>this.drawObstacle(t)),this.drawDog(100,this.dog.y),this.ctx.fillStyle="rgba(0, 0, 0, 0.7)",this.ctx.fillRect(0,0,this.CANVAS_WIDTH,this.CANVAS_HEIGHT),this.ctx.fillStyle="#fff",this.ctx.font="bold 48px Arial",this.ctx.textAlign="center",this.ctx.fillText("Game Over!",this.CANVAS_WIDTH/2,200),this.ctx.font="32px Arial",this.ctx.fillText(`Score: ${this.score}`,this.CANVAS_WIDTH/2,260),this.ctx.fillText(`High Score: ${this.highScore}`,this.CANVAS_WIDTH/2,300),this.ctx.font="24px Arial",this.ctx.fillText("Click or Press Space to Restart",this.CANVAS_WIDTH/2,400)}drawDog(t,i){this.ctx.fillStyle="#D2B48C",this.ctx.fillRect(t,i,this.DOG_SIZE,this.DOG_SIZE),this.ctx.fillStyle="#DDB892",this.ctx.fillRect(t+10,i-10,25,25),this.ctx.fillStyle="#fff",this.ctx.fillRect(t+20,i-5,8,8),this.ctx.fillStyle="#000",this.ctx.fillRect(t+22,i-3,4,4),this.ctx.fillStyle="#000",this.ctx.fillRect(t+30,i+2,3,2),this.ctx.fillStyle="#D2B48C",this.ctx.fillRect(t-8,i+5,10,5)}drawObstacle(t){this.ctx.fillStyle="#228B22",this.ctx.fillRect(t.x,0,this.OBSTACLE_WIDTH,t.gapY),this.ctx.fillRect(t.x,t.gapY+this.GAP_SIZE,this.OBSTACLE_WIDTH,this.CANVAS_HEIGHT-t.gapY-this.GAP_SIZE),this.ctx.fillStyle="#32CD32",this.ctx.fillRect(t.x-5,t.gapY-20,this.OBSTACLE_WIDTH+10,20),this.ctx.fillRect(t.x-5,t.gapY+this.GAP_SIZE,this.OBSTACLE_WIDTH+10,20)}destroy(){this.animationId&&cancelAnimationFrame(this.animationId)}}export{e as S};
